---
title: "Shiny Econometrics Apps"
format: 
  html:
    css: styles.css
    highlight: kate
    df_print: paged

---

# I. Basic OLS

This app bundles six interactive modules into one interface.  
Use the sidebar in the **combined Shiny app** to switch between modules.

[⚡ Open App](https://felixnoth.shinyapps.io/basic_ols/){target="_blank"}

[🔧 Check R Code on GitHub](https://github.com/felixnoth/Shiny-Econometrics/tree/main/apps/basic_ols){target="_blank"} 

---

## 📑 Table of Contents

1. [Covariance → Regression](#covariance--regression)  
2. [OLS β̂₁ Convergence (Monte Carlo with Endogeneity)](#ols-β₁-convergence-monte-carlo-with-endogeneity-ρ)  
3. [Interactions & Squared Terms](#interactions--squared-terms)  
4. [Omitted Variable Bias (Two Regressors)](#omitted-variable-bias-two-regressors)  
5. [Omitted Variable Bias (Three Regressors)](#omitted-variable-bias-three-regressors)  
6. [Attenuation Bias (Measurement Error)](#attenuation-bias-measurement-error)  

---

### Covariance → Regression

**Content**

1. Data are generated from a bivariate normal with covariance matrix  
   $$
   \Sigma = \begin{pmatrix}
   \mathrm{Var}(X) & \mathrm{Cov}(X,Y) \\
   \mathrm{Cov}(X,Y) & \mathrm{Var}(Y)
   \end{pmatrix}.
   $$  
2. For $\Sigma$ to be valid:  
   - Each variance on the diagonal must be strictly positive.  
   - The determinant must be positive, i.e.  
     $$
     \det(\Sigma)
     = \mathrm{Var}(X)\,\mathrm{Var}(Y)\;-\;\bigl(\mathrm{Cov}(X,Y)\bigr)^2
     >0.
     $$

In the app you can drive:  
- $\mathrm{Var}(X)=\mathit{var\_x}$,  
- $\mathrm{Var}(Y)=\mathit{var\_y}$,  
- $\mathrm{Cov}(X,Y)=\mathit{cov\_xy}$,  
- and sample size $n$.

**How to use**

- Move the sliders for **Var(X)**, **Var(Y)**, and **Cov(X,Y)**.  
- The scatter plot updates with regression line; summary shows slope & intercept.

**Guide for interpretation**

- The OLS slope is approximately  
  $$
  \hat\beta_1 \approx \frac{\mathrm{Cov}(X,Y)}{\mathrm{Var}(X)}.
  $$  
- Larger covariance → steeper line; larger Var(X) → flatter line.  

---

### OLS β̂₁ Convergence (Monte Carlo with Endogeneity ρ)

**Content**

1. True model:  
   $$
   y = \beta_1 x + u, \qquad \mathrm{Corr}(x,u)=\rho.
   $$  
2. The app runs Monte Carlo replications and plots the distribution of $\hat\beta_1$.

**How to use**

- Set **sample size $n$**, **correlation ρ**, **true slope β₁**, and **replications**.  
- Click **Simulate**.  

**Guide for interpretation**

- If $\rho=0$: unbiased, variance shrinks as $n↑$.  
- If $\rho≠0$: estimates biased even for large $n$.

---

### Interactions & Squared Terms

**Content**

1. Models:  
   - Continuous $z$: $y=\beta_0+\beta_1 x+\beta_2 z+\beta_3 xz+u$.  
   - Dummy $z$: $y=\beta_0+\beta_1 x+\beta_2 z+\beta_3 xz+u$.  
   - Squared: $y=\beta_0+(\beta_1+\beta_2)x+\beta_3 x^2+u$.  
2. Plots marginal effects and predicted outcomes.

**How to use**

- Choose coefficients, select **z-type**, toggle heteroskedasticity or measurement error.  
- Click **Resimulate**.

**Guide for interpretation**

- Interactions: slope of $x$ depends on $z$.  
- Squared: slope depends on $x$ itself.  

---

### Omitted Variable Bias (Two Regressors)

**Content**

- True model:  
  $$
  y = \beta_1 x_1 + \beta_2 x_2 + \varepsilon.
  $$  
- Compare regression omitting $x_2$ vs including it.

**How to use**

- Adjust correlations and $n$.  
- Click **Simulate**.

**Guide for interpretation**

- OVB formula:  
  $$
  \text{Bias}(\hat\beta_1)=\beta_2 \frac{\mathrm{Cov}(x_1,x_2)}{\mathrm{Var}(x_1)}.
  $$  

---

### Omitted Variable Bias (Three Regressors)

**Content**

- True model:  
  $$
  y = \beta_1 x_1 + \beta_2 x_2 + \beta_3 x_3 + \varepsilon.
  $$  
- Compare four models: full, omit $x_2$, omit $x_3$, omit both.

**How to use**

- Adjust correlations and coefficients.  
- Inspect horizontal bar chart.

**Guide for interpretation**

- Omitting $x_3$ can bias $\hat\beta_1$ indirectly via $x_2$.  

---

### Attenuation Bias (Measurement Error)

**Content**

- True regressor: $x^*$.  
- Observed regressor: $x=x^*+e$.  
- Shows slope shrinkage due to error.

**How to use**

- Set **β, α, n, σₑ, σᵤ**.  
- Toggle scatter plots for true vs observed $x$.

**Guide for interpretation**

- Predicted slope: $\beta \cdot \text{Reliability}$.  
- More measurement error → stronger bias toward zero.

# II. Treatment and Fixed Effects, and Inference

This app bundles six interactive modules into one interface.  
Use the sidebar in the **combined Shiny app** to switch between modules.

[⚡ Open App](https://felixnoth.shinyapps.io/ident_fe/){target="_blank"}

[🔧 Check R Code on GitHub](https://github.com/felixnoth/Shiny-Econometrics/tree/main/apps/ident_fe){target="_blank"} 

---

## 📑 Table of Contents

1. [ATE / ATT / ATU vs SDO (Selection & Heterogeneity)](#ate--att--atu-vs-sdo-selection--heterogeneity)  
2. [Randomization Inference (Fisher’s Sharp Null — CBT Example)](#randomization-inference-fishers-sharp-null--cbt-example)  
3. [Fixed Effects vs Pooled OLS (β̂₁)](#fixed-effects-vs-pooled-ols-β₁)  
4. [SE Simulation (Summary / Diagnostics / Bias Sweep with Decay)](#se-simulation-summary--diagnostics--bias-sweep-with-decay)  
5. [Clustered SEs vs CCV & TSCB (Presets + Sweeps)](#clustered-ses-vs-ccv--tscb-presets--sweeps)  

---

## ATE / ATT / ATU vs SDO (Selection & Heterogeneity)

**Content**

1. Potential outcomes: for each unit, \(Y(0)\) and \(Y(1)\); realized \(Y = D\,Y(1) + (1-D)\,Y(0)\).  
2. Target parameters:
   - Average Treatment Effect (ATE): \(\mathbb{E}[Y(1)-Y(0)]\).  
   - ATT: \(\mathbb{E}[Y(1)-Y(0)\mid D=1]\).  
   - ATU: \(\mathbb{E}[Y(1)-Y(0)\mid D=0]\).  
3. Estimator in a randomized experiment (simple difference in outcomes, SDO):
   \[
   \widehat{\text{SDO}}=\bar Y_1-\bar Y_0.
   \]
4. With **selection on gains** (treatment probability increases in \(\tau_i=Y_i(1)-Y_i(0)\)), SDO can be pulled toward ATT.

**How to use**

- Choose **Sample Size**, **Simulations**, **Treatment Proportion**.  
- Set **Heterogeneity (SD of Treatment Effect)**.  
- Toggle **Enable Selection Bias** to induce \(P(D=1)\uparrow\) with larger \(\tau_i\).  
- Inspect the **histogram of SDO** and the **summary** of ATE/ATT/ATU/SDO across replications.

**Guide for interpretation**

- Under random assignment (no selection), \(\mathbb{E}[\widehat{\text{SDO}}]=\text{ATE}\).  
- With selection on gains, \(\widehat{\text{SDO}}\) shifts toward **ATT**, typically away from ATU.  
- Larger heterogeneity widens the sampling distribution; more reps stabilize Monte Carlo summaries.

---

## Randomization Inference (Fisher’s Sharp Null — CBT Example)

**Content**

1. Sharp null:  
   \[
   H_0:\;Y_i(1)=Y_i(0)\quad\forall i.
   \]
2. Under \(H_0\), potential outcomes are known (\(=Y_{\text{obs}}\)); only the **assignment** varies.  
3. Test statistic (default): absolute difference in means  
   \[
   T=\bigl|\bar Y_T-\bar Y_C\bigr|.
   \]
4. The **randomization distribution** of \(T\) is generated by:  
   - **Complete randomization** (exact enumeration with fixed # treated), or  
   - **Bernoulli assignment** (Monte Carlo draws with \(\Pr(D=1)=p\)).

**How to use**

- Pick assignment scheme (**Complete** or **Bernoulli**), the **statistic** (|SDO|), and set **B** for Monte Carlo.  
- Optionally click **Shuffle observed assignment** (keeps 4 treated of 8) to see how the observed \(T\) changes.  
- Read off the **observed statistic**, the **histogram** of permutation \(T\)’s, and the **p-value**.

**Guide for interpretation**

- The **p-value** is the share of permutation \(T\)’s as or more extreme than the observed \(T\).  
- Small p-value ⇒ data are unlikely under the sharp null ⇒ evidence against no effect for anyone.  
- RI is **exact** under the design and does not require large-sample approximations.

---

## Fixed Effects vs Pooled OLS (β̂₁)

**Content**

1. Panel DGP:
   \[
   \begin{aligned}
   x_{it} &= \sqrt{1-s_f-s_y}\,u_{it} + \sqrt{s_f}\,a_i + \sqrt{s_y}\,g_t,\\
   y_{it} &= \beta_0 + \beta_1 x_{it} + \sigma_a a_i + \sigma_g g_t + e_{it},
   \end{aligned}
   \]
   where \(a_i\) (firm) and \(g_t\) (year) are unobserved effects.  
2. Compared estimators: **Pooled OLS**, **Firm FE**, **Year FE**, **Two-way FE**.  
3. Endogeneity arises if \(x_{it}\) loads on \(a_i\) and/or \(g_t\) (via \(s_f, s_y\)).

**How to use**

- Set the **true \(\beta_1\)**, **\(\sigma_a,\sigma_g\)**, and the **shares** \(s_f,s_y\) that inject endogeneity.  
- Choose panel size (**# firms, years**) and **Monte Carlo iterations**.  
- Click **Run Simulation** to see the sampling distributions and summary table.

**Guide for interpretation**

- If \(s_f>0\) (or \(s_y>0\)), **Pooled OLS** is biased due to correlation with \(a_i\) (or \(g_t\)).  
- **One-way FE** removes bias from the corresponding dimension; **Two-way FE** removes both.  
- Compare **Mean**, **Bias**, **SD**, **RMSE** across models to see the trade-offs.

---

## SE Simulation (Summary / Diagnostics / Bias Sweep with Decay)

**Content**

1. DGP for **designable correlation** between \(x\) and error through cluster/year components with optional **decay** over time/firms.  
2. Fit OLS/FE variants and compute **classical** vs **clustered** SEs.  
3. Three tools:  
   - **Summary run**: Avg\((\widehat\beta)\), SD\((\widehat\beta)\), Avg(SE\(_\text{class}\)), Avg(SE\(_\text{cluster}\)).  
   - **Diagnostic**: compares **mean(SE)** to **SD(\(\widehat\beta\))** (should match under correct SE formula).  
   - **Bias sweep**: vary # **firms** or **years** (optionally keep total \(N\) \(\approx\) fixed) to see **SE bias**  
     \[
     \text{Bias} = \mathbb{E}[\text{SE}] - \text{SD}(\widehat\beta).
     \]

**How to use**

- Set **shares** for clustered variance in \(x\) and residual, pick clustering modes (**firm/year/both**).  
- Choose FE spec and **SE clustering**; click **Run Simulation** for the summary.  
- Use **Run Diagnostic** to check SE calibration.  
- Configure the **sweep** (dimension, grid, iterations, decay) and **Run Sweep**.

**Guide for interpretation**

- If errors (or \(x\)) contain **clustered components**, classical SEs are **too small**; clustered SEs correct this.  
- In the **diagnostic**, mean(SE) \(\approx\) SD(\(\widehat\beta\)) indicates well-calibrated uncertainty.  
- In the **sweep**, clustered SE bias should **shrink** as the # of clusters/years grows.

---

## Clustered SEs vs CCV & TSCB (Presets + Sweeps)

**Content**

1. Population of \(K\) clusters with:  
   - Cluster treatment propensities \(W_m\) (mean \(\bar p\), variance \(\operatorname{Var}(W_m)\)).  
   - Cluster treatment effects \(\tau_m \sim \mathcal{N}(\bar\tau, \sigma_\tau)\).  
   - Optional **cluster FE** in the outcome model.  
2. Competing uncertainty estimators for \(\widehat\beta_w\):  
   - **EHW** (robust, i.i.d. units),  
   - **Clustered** (vcovCL),  
   - **CCV** (design-based convex combination using \(q\equiv\) sampled-cluster fraction),  
   - **TSCB** (Two-Stage Cluster Bootstrap).  
3. Outputs:  
   - **Avg SE vs true SD** of \(\widehat\beta\).  
   - **95% coverage** for CIs based on each SE.  
   - **Design sweeps** in \(q\) or \(K\).

**How to use**

- Try a **Preset** (homogeneous, heterogeneity in assignment/effects, small \(q\)), then fine-tune controls.  
- Pick **OLS vs FE**, toggle **CCV/TSCB**, set **MC reps** and **bootstrap B**; click **Run main simulation**.  
- For **Design sweeps**, choose the sweep dimension, grid, and whether to include CCV/TSCB, then **Run sweep**.

**Guide for interpretation**

- When treatment varies at the **cluster level**, **clustered SEs** outperform EHW; EHW is under-dispersed.  
- **CCV** leverages design info (\(q\), \(W_m\)) and can dominate when only a **fraction of clusters** is sampled.  
- **TSCB** is flexible but computational; coverage improves with adequate \(B\) and cluster counts.
